import React from "react";
import { Button, TextField, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from "@material-ui/core";
import axios from "axios";

const Checkbox = props => <input type="checkbox" {...props} />;

class SingleSelect extends React.Component {

  render() {
    const {isLoading, options, onChange} = this.props;
    return (
      <>
        <Select
          isLoading={isLoading}
          onChange={onChange}
          defaultValue={-1}
          isClearable
          isSearchable
          name={this.props.name}
          menuPosition="fixed"
          options={options}
        />
      </>
    );
  }
}


export class Picker extends React.Component {
  state = {
    open: false,
    options: [],
    value: "",
  };

  handleClickOpen = (value) => {
    this.setState({ open: true, value: value });
  };

  handleClose = () => {
    this.setState({ open: false });
  };

  handleSave = () => {
    const { value } = this.state;

    if(value === "") {
      alert(`Enter appropriate value`);
      return;
    }
    this.setState({ open: false, value: "" });
    this.props.onClose(value);
  };

  handleChange = (e) => this.setState({value: e.target.value})

  render() {
    const Opener = this.props.component;
    const { label, helperText } = this.props;
    return (
      <>
        <Opener onClick={this.handleClickOpen}/>
        <Dialog
          open={this.state.open}
          onClose={this.handleClose}
          aria-labelledby="form-dialog-title"
          PaperProps={{style:{overflow: "visible"}}} >
          <DialogTitle id="form-dialog-title">{this.props.type}</DialogTitle>
          <DialogContent style={{width: "600px", height: "max-content"}}>
            <TextField
              label={label}
              style={{ margin: 8 }}
              placeholder="Placeholder"
              helperText={helperText}
              fullWidth
              value={this.state.value}
              onChange={this.handleChange}
              margin="normal"
              InputLabelProps={{shrink: true,}} />
          </DialogContent>
          <DialogActions>
            <Button onClick={this.handleClose} color="primary">
              Cancel
            </Button>
            <Button onClick={this.handleSave} color="primary">
              Save
            </Button>
          </DialogActions>
        </Dialog>
      </>
    );
  }
}
